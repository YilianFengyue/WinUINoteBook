<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="App2.Pages.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:local="using:App2.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="using:CommunityToolkit.WinUI"
    mc:Ignorable="d">

    <Page.Resources>
        <!-- 自定义亚克力刷子 -->
        <AcrylicBrush x:Key="CustomAcrylicBrush"
                      TintColor="#66FFFFFF"
                      TintOpacity="0.9"
                      TintLuminosityOpacity="0.2"
                      FallbackColor="#FFFFFF"/>

        <!-- 设置卡片间距 -->
        <x:Double x:Key="SettingsCardSpacing">4</x:Double>

        <!-- 分组标题样式 -->
        <Style x:Key="SettingsSectionHeaderTextBlockStyle"
               BasedOn="{StaticResource BodyStrongTextBlockStyle}"
               TargetType="TextBlock">
            <Style.Setters>
                <Setter Property="Margin" Value="1,30,0,6" />
            </Style.Setters>
        </Style>
    </Page.Resources>

    <Grid>
        <!-- 背景图片 - 全屏覆盖 -->
        <Image Source="https://w.wallhaven.cc/full/ml/wallhaven-mlpll9.jpg" 
               Stretch="UniformToFill"/>

        <!-- 亚克力层 - 全屏覆盖，无圆角无边距 -->
        <Rectangle Fill="{StaticResource CustomAcrylicBrush}"/>

        <!-- 设置内容 -->
        <ScrollViewer>
            <Grid>
                <StackPanel MaxWidth="1000"
                            HorizontalAlignment="Stretch"
                            Spacing="{StaticResource SettingsCardSpacing}"
                            Margin="20,20,20,40">
                    <StackPanel.ChildrenTransitions>
                        <EntranceThemeTransition FromVerticalOffset="50" />
                        <RepositionThemeTransition IsStaggeringEnabled="False" />
                    </StackPanel.ChildrenTransitions>

                    <!-- 通用设置 -->
                    <TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}"
                               Text="通用" />

                    <controls:SettingsCard Description="选择应用的主题外观"
                                           Header="主题"
                                           HeaderIcon="{ui:FontIcon Glyph=&#xE771;}">
                        <ComboBox SelectedIndex="2" MinWidth="150">
                            <ComboBoxItem Content="浅色"/>
                            <ComboBoxItem Content="深色"/>
                            <ComboBoxItem Content="跟随系统"/>
                        </ComboBox>
                    </controls:SettingsCard>

                    <controls:SettingsCard Description="设置应用启动时的默认页面"
                                           Header="启动页面"
                                           HeaderIcon="{ui:FontIcon Glyph=&#xE8A7;}">
                        <ComboBox SelectedIndex="0" MinWidth="150">
                            <ComboBoxItem Content="笔记"/>
                            <ComboBoxItem Content="PDF"/>
                            <ComboBoxItem Content="浏览器"/>
                            <ComboBoxItem Content="画板"/>
                        </ComboBox>
                    </controls:SettingsCard>

                    <controls:SettingsCard Description="启用 Mica 云母背景效果"
                                           Header="云母效果"
                                           HeaderIcon="{ui:FontIcon Glyph=&#xE91B;}">
                        <ToggleSwitch IsOn="True" />
                    </controls:SettingsCard>

                    <!-- 编辑器设置 -->
                    <TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}"
                               Text="编辑器" />

                    <controls:SettingsExpander Description="配置 Markdown 编辑和预览选项"
                                               Header="Markdown 设置"
                                               HeaderIcon="{ui:FontIcon Glyph=&#xE70F;}">
                        <Button Content="高级设置"
                                Style="{StaticResource AccentButtonStyle}" />

                        <controls:SettingsExpander.Items>
                            <controls:SettingsCard Header="实时预览">
                                <ToggleSwitch IsOn="True" />
                            </controls:SettingsCard>
                            <controls:SettingsCard Header="同步滚动">
                                <ToggleSwitch IsOn="True" />
                            </controls:SettingsCard>
                            <controls:SettingsCard Header="代码语法高亮">
                                <ToggleSwitch IsOn="True" />
                            </controls:SettingsCard>
                            <controls:SettingsCard Description="选择编辑器字体大小"
                                                   Header="字体大小">
                                <ComboBox SelectedIndex="2" MinWidth="100">
                                    <ComboBoxItem Content="12"/>
                                    <ComboBoxItem Content="14"/>
                                    <ComboBoxItem Content="16"/>
                                    <ComboBoxItem Content="18"/>
                                    <ComboBoxItem Content="20"/>
                                </ComboBox>
                            </controls:SettingsCard>
                        </controls:SettingsExpander.Items>
                    </controls:SettingsExpander>

                    <controls:SettingsCard Description="启用 Monaco Editor 代码编辑器"
                                           Header="高级编辑器"
                                           HeaderIcon="{ui:FontIcon Glyph=&#xE943;}">
                        <ToggleSwitch IsOn="True" />
                    </controls:SettingsCard>

                    <!-- 文档查看设置 -->
                    <TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}"
                               Text="文档查看" />

                    <controls:SettingsExpander Description="PDF 查看和批注功能设置"
                                               Header="PDF 设置"
                                               HeaderIcon="{ui:FontIcon Glyph=&#xEA90;}">
                        <Button Content="PDF 选项" />

                        <controls:SettingsExpander.Items>
                            <controls:SettingsCard Header="启用批注功能">
                                <ToggleSwitch IsOn="True" />
                            </controls:SettingsCard>
                            <controls:SettingsCard Header="默认缩放模式">
                                <ComboBox SelectedIndex="1" MinWidth="120">
                                    <ComboBoxItem Content="适合页面"/>
                                    <ComboBoxItem Content="适合宽度"/>
                                    <ComboBoxItem Content="实际大小"/>
                                </ComboBox>
                            </controls:SettingsCard>
                            <controls:SettingsCard Header="显示侧边栏">
                                <ToggleSwitch IsOn="False" />
                            </controls:SettingsCard>
                        </controls:SettingsExpander.Items>
                    </controls:SettingsExpander>

                    <controls:SettingsCard Description="Word 文档预览转换方式"
                                           Header="Word 处理"
                                           HeaderIcon="{ui:FontIcon Glyph=&#xE8A5;}">
                        <ComboBox SelectedIndex="0" MinWidth="120">
                            <ComboBoxItem Content="转为 PDF"/>
                            <ComboBoxItem Content="转为 HTML"/>
                        </ComboBox>
                    </controls:SettingsCard>

                    <controls:SettingsCard Description="PowerPoint 演示文稿查看模式"
                                           Header="PPT 处理"
                                           HeaderIcon="{ui:FontIcon Glyph=&#xE8FD;}">
                        <ComboBox SelectedIndex="0" MinWidth="120">
                            <ComboBoxItem Content="转为图片"/>
                            <ComboBoxItem Content="转为 PDF"/>
                        </ComboBox>
                    </controls:SettingsCard>

                    <!-- 网络和同步 -->
                    <TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}"
                               Text="网络和同步" />

                    <controls:SettingsExpander Description="配置网页收藏和内容提取功能"
                                               Header="网页收藏"
                                               HeaderIcon="{ui:FontIcon Glyph=&#xE774;}">
                        <ToggleSwitch IsOn="True" />

                        <controls:SettingsExpander.Items>
                            <controls:SettingsCard Header="自动提取正文">
                                <ToggleSwitch IsOn="True" />
                            </controls:SettingsCard>
                            <controls:SettingsCard Header="保存原网页截图">
                                <ToggleSwitch IsOn="False" />
                            </controls:SettingsCard>
                            <controls:SettingsCard Header="默认保存格式">
                                <ComboBox SelectedIndex="0" MinWidth="120">
                                    <ComboBoxItem Content="Markdown"/>
                                    <ComboBoxItem Content="HTML"/>
                                </ComboBox>
                            </controls:SettingsCard>
                        </controls:SettingsExpander.Items>
                    </controls:SettingsExpander>

                    <controls:SettingsCard Description="启用云端同步功能"
                                           Header="云端同步"
                                           HeaderIcon="{ui:FontIcon Glyph=&#xE753;}">
                        <ToggleSwitch IsOn="False" />
                    </controls:SettingsCard>

                    <!-- AI 功能 -->
                    <TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}"
                               Text="AI 功能" />

                    <controls:SettingsCard Description="配置 AI 摘要和生成功能的 API"
                                           Header="AI 服务"
                                           HeaderIcon="{ui:FontIcon Glyph=&#xE99A;}">
                        <Button Content="配置 API" />
                    </controls:SettingsCard>

                    <controls:SettingsCard Description="启用文档自动摘要功能"
                                           Header="智能摘要"
                                           HeaderIcon="{ui:FontIcon Glyph=&#xE8BD;}">
                        <ToggleSwitch IsOn="False" />
                    </controls:SettingsCard>

                    <!-- 存储和性能 -->
                    <TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}"
                               Text="存储和性能" />

                    <controls:SettingsCard Description="选择笔记和附件的存储位置"
                                           Header="存储位置"
                                           HeaderIcon="{ui:FontIcon Glyph=&#xE8B7;}">
                        <Button Content="更改位置" />
                    </controls:SettingsCard>

                    <controls:SettingsCard Description="自动清理临时文件和缓存"
                                           Header="存储清理"
                                           HeaderIcon="{ui:FontIcon Glyph=&#xE74D;}">
                        <Button Content="清理缓存" />
                    </controls:SettingsCard>

                    <controls:SettingsCard Description="启用 Syncfusion 组件加速"
                                           Header="性能优化"
                                           HeaderIcon="{ui:FontIcon Glyph=&#xE945;}">
                        <ToggleSwitch IsOn="True" />
                    </controls:SettingsCard>

                    <!-- 关于 -->
                    <TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}"
                               Text="关于" />

                    <controls:SettingsExpander Description="© 2025. 基于 WinUI 3 构建的学术笔记应用"
                                               Header="笔记工具"
                                               HeaderIcon="{ui:FontIcon Glyph=&#xE946;}">
                        <TextBlock IsTextSelectionEnabled="True"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                   Text="版本 1.0.0" />
                        <controls:SettingsExpander.Items>
                            <controls:SettingsCard HorizontalContentAlignment="Left"
                                                   ContentAlignment="Left">
                                <StackPanel Margin="-12,0,0,0"
                                            Orientation="Vertical">
                                    <HyperlinkButton Content="项目主页" />
                                    <HyperlinkButton Content="使用文档" />
                                    <HyperlinkButton Content="开源许可" />
                                </StackPanel>
                            </controls:SettingsCard>
                        </controls:SettingsExpander.Items>
                    </controls:SettingsExpander>

                    <HyperlinkButton Margin="0,8,0,0"
                                     Content="发送反馈" />
                </StackPanel>
            </Grid>
        </ScrollViewer>
    </Grid>
</Page>